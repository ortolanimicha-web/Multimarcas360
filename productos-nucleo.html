<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrónica Núcleo - Mayorista</title>
    
    <link rel="stylesheet" href="style.css"> 
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
    /* ========================================= */
    /* === ESTILOS TEMA NÚCLEO (PREMIUM DARK) === */
    /* ========================================= */

    .nucleo-theme { 
        font-family: 'Roboto', sans-serif; 
        background-color: #f4f6f9; /* Gris muy suave, más moderno */
    }

    /* --- Navbar Mejorado --- */
    .nucleo-theme .navbar { 
        background-color: #111; 
        border-bottom: none; /* Quitamos la línea sólida fea */
        box-shadow: 0 4px 12px rgba(0,0,0,0.4); /* Sombra elegante */
        padding: 10px 20px;
        height: auto;
        min-height: 70px;
    }
    
    .nucleo-theme .logo { 
        color: #fff; 
        font-weight: 900; 
        text-transform: uppercase; 
        letter-spacing: 1px;
        font-size: 1.4rem;
        background: linear-gradient(45deg, #fff, #a0a0a0);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
    }

    /* Links del Navbar */
    .nucleo-theme .nav-links a { 
        color: #ddd; 
        font-weight: 500;
        transition: color 0.3s;
    }
    .nucleo-theme .nav-links a:hover { 
        color: #fff; 
        text-shadow: 0 0 5px rgba(255,255,255,0.5);
    }
    
    /* Botón Carrito Navbar */
    .nucleo-theme .cart-link { 
        background: rgba(255,255,255,0.1); 
        color: #fff !important; 
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 20px; 
        padding: 8px 15px !important;
        transition: all 0.3s;
    }
    .nucleo-theme .cart-link:hover {
        background: #fff;
        color: #000 !important;
    }

    /* --- Layout General --- */
    .nucleo-layout-wrapper { display: block; max-width: 100%; margin: 0; padding: 0; }
    .nucleo-main-content { width: 100%; }

    /* --- Hero Banner (Cabecera) --- */
    .nucleo-hero-banner {
        border-radius: 0; 
        margin-bottom: 0; 
        height: 380px; 
        background-color: #000;
        display: flex; 
        justify-content: space-between; 
        overflow: hidden;
        position: relative;
    }
    
    /* Degradado sobre la imagen para que el texto se lea bien */
    .nucleo-hero-banner::after {
        content: '';
        position: absolute;
        top: 0; left: 0; width: 50%; height: 100%;
        background: linear-gradient(to right, #000 60%, transparent);
        z-index: 1;
    }

    .nucleo-hero-text { 
        padding: 60px; 
        flex: 1; 
        z-index: 2; 
        color: white; 
        max-width: 600px;
    }
    .nucleo-hero-text h2 { 
        margin: 0 0 10px; 
        font-size: 1rem; 
        text-transform: uppercase; 
        letter-spacing: 3px; 
        color: #6f42c1; /* Púrpura Núcleo */
        font-weight: bold;
    }
    .nucleo-hero-text h1 { 
        font-size: 3rem; 
        margin: 0 0 20px; 
        font-weight: 900; 
        line-height: 1; 
    }
    .nucleo-hero-text p {
        font-size: 1.1rem;
        color: #ccc;
        margin-bottom: 30px;
    }
    
    .nucleo-btn {
        background: linear-gradient(135deg, #6f42c1, #563d7c); 
        color: #fff; 
        border: none; 
        padding: 12px 30px;
        border-radius: 30px; 
        font-weight: bold; 
        cursor: pointer; 
        text-transform: uppercase;
        box-shadow: 0 4px 15px rgba(111, 66, 193, 0.4);
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .nucleo-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(111, 66, 193, 0.6);
        background: linear-gradient(135deg, #7b52d1, #64498c); 
    }

    /* --- Barra de Título --- */
    .section-header-nucleo { 
        margin-bottom: 30px; 
        border-bottom: 1px solid #e0e0e0; 
        padding: 40px 40px 15px 40px; 
        display: flex; 
        justify-content: space-between; 
        align-items: flex-end; 
        max-width: 1400px; 
        margin-left: auto;
        margin-right: auto;
    }
    .section-header-nucleo h3 { 
        margin: 0; 
        color: #111; 
        text-transform: uppercase; 
        font-size: 1.8rem; 
        font-weight: 900; 
        letter-spacing: -0.5px;
    }

    /* --- Grid Productos (Contenedor) --- */
    .catalogo-grid-nucleo {
        display: grid; 
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 25px; 
        padding: 0 40px 60px 40px; 
        max-width: 1400px; 
        margin: 0 auto;
    }

    /* --- TARJETA DE PRODUCTO (Mejorada) --- */
    .nucleo-theme .tarjeta-producto {
        border: none; 
        border-radius: 12px; 
        background: white; 
        padding-bottom: 0; /* Quitamos padding bottom para que el botón pegue abajo */
        transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
        overflow: hidden; /* Importante para el border-radius */
        box-shadow: 0 1px 3px rgba(0,0,0,0.05), 0 1px 2px rgba(0,0,0,0.1);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        height: 100%;
    }
    
    /* Efecto Hover en Tarjeta */
    .nucleo-theme .tarjeta-producto:hover { 
        transform: translateY(-8px); 
        box-shadow: 0 14px 28px rgba(0,0,0,0.1), 0 10px 10px rgba(0,0,0,0.05);
    }

    /* Carrusel de imágenes */
    .nucleo-theme .product-carousel { 
        height: 250px; 
        border-bottom: 1px solid #f0f0f0; 
        background-color: #fff;
        position: relative;
    }
    
    .nucleo-theme .carousel-image {
        padding: 20px; /* Aire para la imagen */
        object-fit: contain;
    }

    /* Info del Producto */
    .nucleo-theme .producto-info { 
        padding: 20px; 
        text-align: center; 
        display: flex; 
        flex-direction: column; 
        align-items: center; 
        flex-grow: 1;
    }
    
    /* Título producto */
    .nucleo-theme .tarjeta-producto h3 {
        font-size: 1rem;
        color: #333;
        line-height: 1.4;
        margin-bottom: 10px;
        font-weight: 600;
        height: 2.8em; /* Altura fija para 2 líneas */
        overflow: hidden;
    }

    /* Precio */
    .nucleo-theme .producto-precio { 
        color: #111; 
        font-size: 1.6rem; 
        font-weight: 900; 
        margin-bottom: 15px;
    }

    /* Acciones (Botón) */
    .nucleo-theme .producto-acciones {
        margin-top: auto;
        width: 100%;
        padding: 0 20px 20px 20px;
    }

    .nucleo-theme .boton-agregar {
        background: #111; 
        color: white; 
        border-radius: 8px;
        text-transform: uppercase; 
        font-size: 0.9rem; 
        font-weight: bold;
        padding: 12px; 
        width: 100%;
        border: none;
        transition: background 0.3s;
    }
    .nucleo-theme .boton-agregar:hover {
        background: #6f42c1; /* Púrpura al pasar mouse */
    }


    /* --- ESTILOS SIDEBAR (MENÚ LATERAL) --- */
    .nucleo-overlay {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.5); z-index: 2000;
        opacity: 0; visibility: hidden; transition: all 0.3s ease;
        backdrop-filter: blur(2px); /* Efecto borroso de fondo */
    }
    .nucleo-overlay.active { opacity: 1; visibility: visible; }

    .nucleo-offcanvas {
        position: fixed; top: 0; left: 0; height: 100%; width: 300px;
        background: #fff; z-index: 2001;
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.77, 0, 0.175, 1);
        box-shadow: 5px 0 15px rgba(0,0,0,0.1);
        display: flex; flex-direction: column;
    }
    .nucleo-offcanvas.active { transform: translateX(0); }

    .nucleo-offcanvas-header {
        background: #111; color: #fff; padding: 25px 20px;
        display: flex; justify-content: space-between; align-items: center;
        /* QUITAMOS LA LÍNEA DEL ENCABEZADO TAMBIÉN */
        border-bottom: none; 
    }
    
    /* Links del Sidebar (Aquí estaba la línea molesta) */
    .nucleo-cat-link {
        display: flex; align-items: center; gap: 15px; padding: 15px 20px;
        text-decoration: none; color: #444; font-weight: 500; 
        border-bottom: none; /* <--- IMPORTANTE: Quitamos línea divisoria */
        cursor: pointer; transition: 0.2s;
        border-radius: 8px;
        margin: 5px 10px;
    }
    /* Efecto Hover estilo botón suave */
    .nucleo-cat-link:hover { 
        background: #f0f0f0; 
        color: #6f42c1; 
        transform: translateX(5px);
    }
    .nucleo-cat-link img { width: 35px; height: 35px; border-radius: 50%; object-fit: cover;}
    

    /* --- BARRA HERRAMIENTAS (Buscador/Filtros) --- */
    .nucleo-toolbar-advanced {
        display: flex; flex-wrap: wrap; gap: 15px;
        justify-content: space-between; align-items: center;
        background: #fff; padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 20px rgba(0,0,0,0.05);
        margin: 20px 40px 30px 40px; 
        border-left: 5px solid #6f42c1;
        max-width: 1400px; 
        margin-left: auto; margin-right: auto;
    }
    .nucleo-search-box {
        display: flex; align-items: center; border: 1px solid #eee;
        background: #f9f9f9;
        border-radius: 30px; overflow: hidden; flex-grow: 1; max-width: 400px;
    }
    .nucleo-search-box input { border: none; padding: 10px 20px; outline: none; width: 100%; background: transparent; }
    .nucleo-search-box button { background: #111; color: white; border: none; padding: 10px 20px; cursor: pointer; transition: 0.3s; }
    .nucleo-search-box button:hover { background: #6f42c1; }


    /* ================================================== */
    /* === DISEÑO MÓVIL EXACTO (SCREENSHOT REPLICA) === */
    /* ================================================== */
    @media (max-width: 768px) {
        
        /* 1. FONDO GENERAL NEGRO */
        body.nucleo-theme, 
        .nucleo-theme .main-content-area, 
        .nucleo-main-content {
            background-color: #000 !important;
            color: #fff !important;
        }

        /* 2. NAVBAR (PARTE SUPERIOR NEGRA) */
        .nucleo-theme .navbar {
            background-color: #000 !important;
            border-bottom: 1px solid #333;
        }
        .nucleo-theme .logo {
            color: #fff !important; /* Texto Electrónica Núcleo en Blanco */
            text-shadow: none !important;
        }

        /* 3. ESTILOS DEL MENÚ / ENLACES */
        /* Aseguramos fondo negro si se despliega el menú */
        .nucleo-theme .nav-links {
            background-color: #000 !important;
            border-top: 1px solid #333;
        }

        /* "Volver a Inicio" en BLANCO */
        .nucleo-theme .nav-links a[href="index.html"] {
            color: #fff !important;
            font-weight: bold;
        }

        /* "Iniciar Sesión" y "Salir" en AMARILLO */
        #nucleo-login-link, 
        #nucleo-logout-btn, 
        #nucleo-admin-link {
            color: #ffc107 !important; /* Amarillo */
            border-color: #ffc107 !important;
        }

        /* 4. CARRITO ROJO CON FONDO NEGRO */
        .nucleo-theme .cart-link {
            background-color: #000 !important; /* Fondo Negro */
            border: 1px solid #333 !important; /* Borde sutil */
            color: #fff !important; /* Texto "Carrito" (si se ve) en blanco */
        }
        /* El icono del carrito (fa-shopping-cart) en ROJO */
        .nucleo-theme .cart-link i {
            color: #ff0000 !important; 
            font-size: 1.2rem;
        }
        /* La burbuja de cantidad (Badge) en ROJO */
        .cart-badge {
            background-color: #ff0000 !important;
            color: #fff !important;
        }

        /* 5. IMAGEN COMPLETAMENTE NÍTIDA */
        /* Quitamos filtros y sombras para que se vea real */
        .nucleo-hero-banner {
            background-color: #000 !important;
            height: auto !important;
            margin-top: 0;
            position: relative;
        }
        
        /* Eliminar la capa oscura que opacaba la imagen */
        .nucleo-hero-banner::after {
            display: none !important; 
        }

        .nucleo-hero-image {
            width: 100% !important;
            height: 300px !important; /* Altura suficiente para verla bien */
            background-size: contain !important; /* ¡CLAVE! Muestra la imagen entera sin cortarla */
            background-repeat: no-repeat !important;
            background-position: center !important;
            background-color: #000; /* Relleno negro si la imagen no es cuadrada */
            padding-bottom: 0 !important; /* Quitamos el hack anterior */
            opacity: 1 !important;
            order: 1; /* Poner la imagen arriba del texto */
        }

        /* Textos del Banner ("NOVEDADES 2025") sobre fondo negro */
        .nucleo-hero-text {
            order: 2;
            background-color: #000;
            position: relative;
            z-index: 10;
            padding-top: 10px;
        }
        .nucleo-hero-text h1, 
        .nucleo-hero-text h2, 
        .nucleo-hero-text p {
            color: #fff !important;
            text-shadow: none !important;
        }
        /* Subtítulo pequeño en gris claro */
        .nucleo-hero-text h2 {
            color: #ccc !important; 
        }

        /* 6. TÍTULOS DE SECCIONES (Productos Destacados) */
        .section-header-nucleo h3, 
        #nucleo-results-count {
            color: #fff !important;
        }
        .section-header-nucleo {
            border-bottom: 1px solid #333;
        }

        /* Ajuste para el botón de hamburguesa */
        .hamburger-menu span {
            background-color: #fff !important;
        }
    }
</style>
</head>
<body class="nucleo-theme">

    <nav class="navbar">
        <div class="logo">Electrónica Núcleo</div>
        <ul class="nav-links">
            <li><a href="index.html">Volver a Inicio</a></li>
            
            <li id="nucleo-auth-links" style="display: flex; align-items: center; gap: 15px;">
                <a href="admin-nucleo.html" id="nucleo-admin-link" style="color: #ffc107; font-weight: bold; display:none;">
                    <i class="fas fa-user-shield"></i> Admin
                </a>

                <span id="nucleo-user-email" style="color: white; font-size: 0.9rem; display: none;"></span>

                <a href="login-nucleo.html" id="nucleo-login-link" style="color: #ffc107; font-weight: bold;">
    <i class="fas fa-sign-in-alt"></i> Iniciar Sesión
</a>

                <button id="nucleo-logout-btn" style="background: transparent; border: 1px solid #ffc107; color: #ffc107; border-radius: 4px; padding: 5px 10px; cursor: pointer; font-weight: bold; display: none;">
                    <i class="fas fa-sign-out-alt"></i> Salir
                </button>
            </li>

            <li id="search-form-nav">
                <form action="busqueda.html" method="GET">
                    <input type="text" name="q" id="search-input-nav" placeholder="Buscar...">
                    <button type="submit"><i class="fas fa-search"></i></button>
                </form>
            </li>
            <li><a href="carrito.html" class="cart-link"><i class="fas fa-shopping-cart"></i> Carrito</a></li>
        </ul>
        <div class="hamburger-menu">
            <span></span><span></span><span></span>
        </div>
    </nav>

    <div id="nucleo-sidebar-overlay" class="nucleo-overlay"></div>
    
    <aside id="nucleo-sidebar-container" class="nucleo-offcanvas">
        <div class="nucleo-offcanvas-header">
            <h3 style="margin:0; font-size:1.1rem;">CATEGORÍAS</h3>
            <button id="close-nucleo-sidebar" style="background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;">&times;</button>
        </div>
        <div class="nucleo-offcanvas-body">
            <ul id="nucleo-category-list" style="list-style:none; padding:0; margin:0;">
                <li style="padding:10px; text-align:center; color:#777;"><i class="fas fa-spinner fa-spin"></i> Cargando...</li>
            </ul>
            <button id="btn-ver-todo-nucleo" style="width:100%; padding:10px; margin-top:20px; background:#333; color:white; border:none; cursor:pointer;">Ver Todo el Stock</button>
        </div>
    </aside>

    <div class="nucleo-layout-wrapper">
        <main class="nucleo-main-content">
    
    <div id="nucleo-landing-hero" class="nucleo-hero-banner">
        <div id="category-banner-container" class="category-banner-container" style="display: none; position: relative; width: 100%; height: 300px; overflow: hidden; margin-bottom: 25px;">
    <img id="category-banner-img" src="" alt="Banner Categoría" style="width: 100%; height: 100%; object-fit: cover; filter: brightness(0.7);">
    
    <div style="position: absolute; bottom: 0; left: 0; width: 100%; padding: 40px; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);">
        <h1 id="category-banner-title" style="color: white; margin: 0; font-size: 3rem; font-weight: 900; text-transform: uppercase; text-shadow: 2px 2px 10px rgba(0,0,0,0.5);">CATEGORÍA</h1>
    </div>
</div>
        <div class="nucleo-hero-text">
            <h2 style="color: #cbbde2;">Tecnología Mayorista</h2>
            <h1>NOVEDADES 2025</h1>
            <p>Equipá tu negocio con lo último en gadgets y accesorios.</p>
            <button id="btn-open-sidebar" class="nucleo-btn" style="background: #fff; color: #6f42c1;">Ver Catálogo</button>
        </div>
        <div class="nucleo-hero-image" style="background-image: url('https://images.unsplash.com/photo-1550009158-9ebf69173e03?auto=format&fit=crop&w=1200&q=80'); clip-path: none; width: 55%;"></div>
    </div>

    <div id="category-banner-container" class="category-banner-container" style="display: none; position: relative; width: 100%; height: 250px; overflow: hidden; margin-bottom: 25px; border-radius: 8px;">
        <img id="category-banner-img" src="" alt="Banner Categoría" style="width: 100%; height: 100%; object-fit: cover;">
        <div style="position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px; background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);">
            <h1 id="category-banner-title" style="color: white; margin: 0; font-size: 2.5rem; text-shadow: 0 2px 4px rgba(0,0,0,0.5);"></h1>
        </div>
    </div>
    
    <div class="nucleo-toolbar-advanced">
            
        <form id="nucleo-cat-search-form" class="nucleo-search-box">
            <input type="text" id="nucleo-cat-search-input" placeholder="Buscar en el catálogo...">
            <button type="submit"><i class="fas fa-search"></i></button>
        </form>

        <div class="nucleo-view-controls">
            <span style="font-size:0.8rem; font-weight:bold; color:#555; margin-right:5px;">VISTA:</span>
            <div class="view-buttons-nucleo">
                <button class="btn-view-nucleo" data-view="list" title="Lista"><i class="fas fa-list"></i></button>
                <button class="btn-view-nucleo active" data-view="grid" title="Grilla"><i class="fas fa-th-large"></i></button>
                <button class="btn-view-nucleo" data-view="feed" title="Feed"><i class="fas fa-mobile-alt"></i></button>
            </div>
        </div>

        <div class="nucleo-sort-box">
            <select id="nucleo-cat-sort">
                <option value="default">Destacado</option>
                <option value="price-asc">Precio: Menor a Mayor</option>
                <option value="price-desc">Precio: Mayor a Menor</option>
                <option value="az">Nombre: A - Z</option>
                <option value="za">Nombre: Z - A</option>
            </select>
        </div>
    </div>
    <div class="section-header-nucleo">
        <h3 id="nucleo-results-count">Productos Destacados</h3>
        <p style="color: #777; margin-top: 5px; font-size:0.9rem;">Productos de alta rotación seleccionados para vos.</p>
    </div>

    <div id="catalogo-container" class="catalogo-grid-nucleo view-grid">
        <div class="loading-spinner">
            <i class="fas fa-circle-notch fa-spin"></i> Cargando mercadería...
        </div>
    </div>

    <div class="promo-banner-full" style="background-image: url('https://images.unsplash.com/photo-1512054502232-10a0a035d672?auto=format&fit=crop&w=1200&q=80'); margin-top:40px; height:200px; display:flex; align-items:center; justify-content:center; position:relative;">
        <div style="position:relative; z-index:2; color:white; text-align:center;">
            <h2 style="font-size:2.5rem; font-weight:900; text-shadow:0 2px 10px rgba(0,0,0,0.5);">¡Iluminá tu espacio!</h2>
        </div>
        <div style="position:absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.3);"></div>
    </div>

</main>
    </div>

    <footer class="nucleo-footer" style="background: #000; color: #fff; padding:20px; text-align:center;">
        <p style="margin:0; color: #555;">© 2025 Electrónica Núcleo - Multimarcas 360</p>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyCD4lBf6BA76Oz-SDr4f8eaPA-q7v5AecY",
        authDomain: "consultoravidal91.firebaseapp.com",
        projectId: "consultoravidal91",
        storageBucket: "consultoravidal91.firebasestorage.app",
        messagingSenderId: "840042202477",
        appId: "1:840042202477:web:aae77961b4bca465dc4664",
        measurementId: "G-HP3L0WZ60V"
      };
      let db, auth;
      if (typeof firebase !== 'undefined') {
          if (!firebase.apps.length) {
             firebase.initializeApp(firebaseConfig);
             db = firebase.firestore();
             auth = firebase.auth();
          } else {
             db = firebase.firestore();
             auth = firebase.auth();
          }
      }
      const ADMIN_EMAIL = 'ortolanimichael@gmail.com';
      
      // =========================================================
      // === SCRIPT PARA EL FUNCIONAMIENTO DEL TOOLBAR (VISTAS) ===
      // =========================================================

      document.addEventListener('DOMContentLoaded', () => {
        const catalogo = document.getElementById('catalogo-container');
        const viewButtons = document.querySelectorAll('.btn-view-nucleo');
        const searchForm = document.getElementById('nucleo-cat-search-form');
        const sortSelect = document.getElementById('nucleo-cat-sort');

        // Función para cambiar la vista (Grid, List, Feed)
        function changeView(view) {
            // Eliminar todas las clases de vista
            catalogo.classList.remove('view-grid', 'view-list', 'view-feed');
            
            // Agregar la clase de vista seleccionada
            catalogo.classList.add(`view-${view}`);

            // Actualizar botones de vista
            viewButtons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-view') === view) {
                    btn.classList.add('active');
                }
            });

            // Guardar la vista preferida (para persistencia)
            localStorage.setItem('nucleo-product-view', view);
        }

        // 1. Manejador de botones de vista
        viewButtons.forEach(button => {
            button.addEventListener('click', () => {
                const newView = button.getAttribute('data-view');
                changeView(newView);
            });
        });

        // 2. Inicializar vista desde localStorage (o default 'grid')
        const savedView = localStorage.getItem('nucleo-product-view') || 'grid';
        changeView(savedView);

        // 3. Manejador de Búsqueda y Ordenamiento (Solo para simular la funcionalidad)
        // 3. Manejador de Búsqueda REAL (Corregido)
        const performNucleoSearch = () => {
            const input = document.getElementById('nucleo-cat-search-input');
            const term = input.value.toLowerCase().trim();
            const cards = document.querySelectorAll('.tarjeta-producto');
            const resultsHeader = document.getElementById('nucleo-results-count');
            let visibleCount = 0;

            cards.forEach(card => {
                // Buscamos en el título y en la categoría del producto
                const title = card.querySelector('.producto-nombre')?.textContent.toLowerCase() || '';
                const category = card.querySelector('.producto-categoria')?.textContent.toLowerCase() || '';
                
                if (title.includes(term) || category.includes(term)) {
                    card.style.display = ''; // Mostrar (respetando el CSS grid/flex)
                    visibleCount++;
                } else {
                    card.style.display = 'none'; // Ocultar
                }
            });

            // Actualizar el texto del contador de resultados
            if (resultsHeader) {
                if (term === '') {
                    resultsHeader.textContent = "Todos los productos";
                } else {
                    resultsHeader.textContent = `Encontrados: ${visibleCount}`;
                }
            }
        };

        // Evento al presionar Enter o clic en buscar
        searchForm.addEventListener('submit', (e) => {
            e.preventDefault();
            performNucleoSearch();
        });

        // Evento opcional: Búsqueda en vivo mientras escribes
        const searchInput = document.getElementById('nucleo-cat-search-input');
        if(searchInput) {
            searchInput.addEventListener('input', performNucleoSearch);
        }
        
        sortSelect.addEventListener('change', () => {
             alert('Ordenamiento activado: Si tuviera el código de app.js implementaría la lógica de ordenamiento.');
        });
        
      });
      // FIN SCRIPT TOOLBAR
    </script>

    <script src="auth.js"></script>
    <script src="app.js"></script>
    
</body>
</html>